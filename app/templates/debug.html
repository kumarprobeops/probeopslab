{% extends "base.html" %}

{% block title %}HTTP Request Debug Tool - View Headers, IP & Geo Info{% endblock %}
{% block meta_description %}See your HTTP request headers, IP address, geo location, and Cloudflare edge info as seen by an origin server. Free debug tool for DevOps engineers.{% endblock %}
{% block og_title %}HTTP Request Debug Tool | ProbeOps Lab{% endblock %}
{% block og_description %}See your HTTP request headers, IP address, geo location, and Cloudflare edge info as seen by an origin server.{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Request Debug</h1>
    <p class="subtitle">See how your request appears to a CDN edge</p>
</div>

<div class="info-box" style="margin-bottom: 1.5rem;">
    <p><strong>Note:</strong> This site runs behind Cloudflare with a minimal, fixed configuration. You cannot test your own CDN rules here.</p>
    <p style="margin-top: 0.5rem; margin-bottom: 0;">Use this to:</p>
    <ul class="tips-list" style="margin-top: 0.5rem;">
        <li>See how your network/proxy/VPN appears to a CDN edge</li>
        <li>Validate IP and geo detection from a neutral reference</li>
        <li>Inspect request headers exactly as received by the origin</li>
    </ul>
</div>

<div class="card">
    <h2>Client Identity</h2>
    <div class="debug-table">
        <div class="debug-row">
            <span class="debug-label">Client IP</span>
            <span class="debug-value highlight">{{ ctx.client_ip }}</span>
        </div>
        <div class="debug-row">
            <span class="debug-label">Country</span>
            <span class="debug-value highlight">{{ ctx.country }}</span>
        </div>
        <div class="debug-row">
            <span class="debug-label">City</span>
            <span class="debug-value">{{ ctx.city }}</span>
        </div>
        <div class="debug-row">
            <span class="debug-label">Region</span>
            <span class="debug-value">{{ ctx.region }}</span>
        </div>
    </div>
</div>

<div class="card">
    <h2>Request Info</h2>
    <div class="debug-table">
        <div class="debug-row">
            <span class="debug-label">Method</span>
            <span class="debug-value">{{ ctx.method }}</span>
        </div>
        <div class="debug-row">
            <span class="debug-label">Scheme</span>
            <span class="debug-value">{{ ctx.scheme }}</span>
        </div>
        <div class="debug-row">
            <span class="debug-label">Host</span>
            <span class="debug-value">{{ ctx.host }}</span>
        </div>
        <div class="debug-row">
            <span class="debug-label">Path</span>
            <span class="debug-value">{{ ctx.path }}</span>
        </div>
        {% if ctx.query %}
        <div class="debug-row">
            <span class="debug-label">Query</span>
            <span class="debug-value">{{ ctx.query }}</span>
        </div>
        {% endif %}
    </div>
</div>

<div class="card">
    <h2>Standard HTTP Headers</h2>
    <p class="text-muted" style="margin-bottom: 1rem; font-size: 0.875rem;">Common headers seen by any origin server behind a reverse proxy</p>
    <div class="debug-table mono">
        {% for key, value in ctx.headers.items() %}
        {% if key in ['host', 'x-forwarded-for', 'x-forwarded-proto', 'user-agent', 'accept-language', 'accept-encoding'] %}
        <div class="debug-row">
            <span class="debug-label">{{ key }}</span>
            <span class="debug-value">{{ value }}</span>
        </div>
        {% endif %}
        {% endfor %}
    </div>
</div>

<div class="card">
    <h2>Cloudflare Headers</h2>
    <p class="text-muted" style="margin-bottom: 1rem; font-size: 0.875rem;">Headers added by Cloudflare edge (this site's CDN)</p>
    <div class="debug-table mono">
        {% for key, value in ctx.headers.items() %}
        {% if key.startswith('cf-') %}
        <div class="debug-row">
            <span class="debug-label">{{ key }}</span>
            <span class="debug-value">{{ value }}</span>
        </div>
        {% endif %}
        {% endfor %}
    </div>
</div>

<div class="info-box">
    <p><strong>Security:</strong> Only allowlisted headers are displayed. Cookies, authorization, and other sensitive headers are filtered out.</p>
</div>

<div class="tip-box">
    <p><strong>Tip:</strong> Need to see how this looks from multiple regions? ProbeOps can run it from 6+ locations â†’ <a href="https://probeops.com?utm_source=probeopslab&utm_medium=tip&utm_campaign=debug" target="_blank" rel="noopener">probeops.com</a></p>
</div>
{% endblock %}
